\hypertarget{classpacpus_1_1SickLMSSensor}{\section{pacpus\-:\-:Sick\-L\-M\-S\-Sensor Class Reference}
\label{classpacpus_1_1SickLMSSensor}\index{pacpus\-::\-Sick\-L\-M\-S\-Sensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}}
}


The class implenting receiving, decoding and storing process of Sick L\-M\-S data.  




{\ttfamily \#include $<$Sick\-L\-M\-S\-Sensor.\-h$>$}

Inheritance diagram for pacpus\-:\-:Sick\-L\-M\-S\-Sensor\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classpacpus_1_1SickLMSSensor}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classpacpus_1_1SickLMSSensor_a1ec604914c64ed7d5d884ae55472499f}{custom\-Event} (Q\-Event $\ast$e)
\begin{DoxyCompactList}\small\item\em custom\-Event allows to receive the incoming data and store them into known structures. \end{DoxyCompactList}\item 
\hypertarget{classpacpus_1_1SickLMSSensor_a31986523670fd4ca7173a30bc40688b4}{void \hyperlink{classpacpus_1_1SickLMSSensor_a31986523670fd4ca7173a30bc40688b4}{configure} ()}\label{classpacpus_1_1SickLMSSensor_a31986523670fd4ca7173a30bc40688b4}

\begin{DoxyCompactList}\small\item\em Configure the object, not used for the moment. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classpacpus_1_1SickLMSSensor_a9e87f9cb5fd8c978af8d2633d98c0405}{\hyperlink{classpacpus_1_1SickLMSSensor_a9e87f9cb5fd8c978af8d2633d98c0405}{Sick\-L\-M\-S\-Sensor} (Q\-Object $\ast$parent)}\label{classpacpus_1_1SickLMSSensor_a9e87f9cb5fd8c978af8d2633d98c0405}

\begin{DoxyCompactList}\small\item\em Constructor. \end{DoxyCompactList}\item 
\hyperlink{classpacpus_1_1SickLMSSensor_ad1e27ae5fb0421011f3f6bf464f7e42c}{Sick\-L\-M\-S\-Sensor} (Q\-Object $\ast$parent, Q\-String name, Q\-String ip, int port, int \hyperlink{classpacpus_1_1AbstractSickSensor_a2cefb63d92089cab86f874a3390acb28}{recording})
\begin{DoxyCompactList}\small\item\em \hyperlink{classpacpus_1_1SickLMSSensor}{Sick\-L\-M\-S\-Sensor} constructor. \end{DoxyCompactList}\item 
\hypertarget{classpacpus_1_1SickLMSSensor_a557fadfe7ac1a08f9d2ee2d88cc66a61}{\hyperlink{classpacpus_1_1SickLMSSensor_a557fadfe7ac1a08f9d2ee2d88cc66a61}{$\sim$\-Sick\-L\-M\-S\-Sensor} ()}\label{classpacpus_1_1SickLMSSensor_a557fadfe7ac1a08f9d2ee2d88cc66a61}

\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
\hypertarget{classpacpus_1_1SickLMSSensor_ab598fdcee13cb01624dfd806e524afac}{void {\bfseries run} ()}\label{classpacpus_1_1SickLMSSensor_ab598fdcee13cb01624dfd806e524afac}

\item 
void \hyperlink{classpacpus_1_1SickLMSSensor_a082417a753cef1d4f726c50b2e14a4d0}{stop\-Activity} ()
\item 
void \hyperlink{classpacpus_1_1SickLMSSensor_a6268a9b5b17db84b662c562ea332541f}{start\-Activity} ()
\item 
void \hyperlink{classpacpus_1_1SickLMSSensor_a3182c21683131e52c520d45bd4a23dae}{reconstitute\-Message} (const char $\ast$packet, const int length, road\-\_\-time\-\_\-t time)
\begin{DoxyCompactList}\small\item\em reconstitute\-Message reconstitute a complete message from received packets \end{DoxyCompactList}\item 
int \hyperlink{classpacpus_1_1SickLMSSensor_a4ba9228b2f513fc3d7dcac5813065212}{process\-Scan\-Data} (\hyperlink{classpacpus_1_1MessageLMS}{Message\-L\-M\-S} $\ast$msg)
\begin{DoxyCompactList}\small\item\em process\-Scan\-Data Parse information and process every needed values. \end{DoxyCompactList}\item 
int \hyperlink{classpacpus_1_1SickLMSSensor_a0993b71ac52777e6588e57bb261c8ae9}{is\-Message\-Complete} (const char $\ast$packets, unsigned int size)
\begin{DoxyCompactList}\small\item\em is\-Message\-Complete find the $<$\-E\-T\-X$>$ character (corresponding to the end of a message). \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classpacpus_1_1SickLMSSensor_a33a0af999049a7d9a35e1719d9d9cd48}{\hyperlink{classpacpus_1_1SickSocket}{Sick\-Socket} $\ast$ \hyperlink{classpacpus_1_1SickLMSSensor_a33a0af999049a7d9a35e1719d9d9cd48}{S\-\_\-socket}}\label{classpacpus_1_1SickLMSSensor_a33a0af999049a7d9a35e1719d9d9cd48}

\begin{DoxyCompactList}\small\item\em S\-\_\-socket, used to receive and send data to the remote sensor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
The class implenting receiving, decoding and storing process of Sick L\-M\-S data. 

This class can be used as a particular thread to acquire data from Sick L\-D\-M\-R\-S sensors. The Ethernet interface is used to get data from the sensor. Thus, the goal of this class is to get packets and decode them. Also, it offers the possibility to store all relevant information in two files (.dbt and .utc). It can be managed by \hyperlink{classpacpus_1_1SickComponent}{Sick\-Component} objects. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classpacpus_1_1SickLMSSensor_ad1e27ae5fb0421011f3f6bf464f7e42c}{\index{pacpus\-::\-Sick\-L\-M\-S\-Sensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}!Sick\-L\-M\-S\-Sensor@{Sick\-L\-M\-S\-Sensor}}
\index{Sick\-L\-M\-S\-Sensor@{Sick\-L\-M\-S\-Sensor}!pacpus::SickLMSSensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}}
\subsubsection[{Sick\-L\-M\-S\-Sensor}]{\setlength{\rightskip}{0pt plus 5cm}pacpus\-::\-Sick\-L\-M\-S\-Sensor\-::\-Sick\-L\-M\-S\-Sensor (
\begin{DoxyParamCaption}
\item[{Q\-Object $\ast$}]{parent, }
\item[{Q\-String}]{name, }
\item[{Q\-String}]{ip, }
\item[{int}]{port, }
\item[{int}]{recording}
\end{DoxyParamCaption}
)}}\label{classpacpus_1_1SickLMSSensor_ad1e27ae5fb0421011f3f6bf464f7e42c}


\hyperlink{classpacpus_1_1SickLMSSensor}{Sick\-L\-M\-S\-Sensor} constructor. 


\begin{DoxyParams}{Parameters}
{\em parent} & Basically, a \hyperlink{classpacpus_1_1SickComponent}{Sick\-Component} object. \\
\hline
{\em name} & Name of the sensor in order to write on .dbt and .utc files and to recognize every sensors used. \\
\hline
{\em ip} & The I\-P address of the remote Sick L\-M\-S sensor. \\
\hline
{\em port} & The port of the remote Sick L\-M\-S sensor. \\
\hline
{\em recording} & If {\ttfamily true}, data is recorded into dbt + utc files. Data is not recorded otherwise. \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\hypertarget{classpacpus_1_1SickLMSSensor_a1ec604914c64ed7d5d884ae55472499f}{\index{pacpus\-::\-Sick\-L\-M\-S\-Sensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}!custom\-Event@{custom\-Event}}
\index{custom\-Event@{custom\-Event}!pacpus::SickLMSSensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}}
\subsubsection[{custom\-Event}]{\setlength{\rightskip}{0pt plus 5cm}void pacpus\-::\-Sick\-L\-M\-S\-Sensor\-::custom\-Event (
\begin{DoxyParamCaption}
\item[{Q\-Event $\ast$}]{e}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{classpacpus_1_1SickLMSSensor_a1ec604914c64ed7d5d884ae55472499f}


custom\-Event allows to receive the incoming data and store them into known structures. 


\begin{DoxyParams}{Parameters}
{\em e} & Event that carries the Ethernet packets and receiving time. \\
\hline
\end{DoxyParams}
\hypertarget{classpacpus_1_1SickLMSSensor_a0993b71ac52777e6588e57bb261c8ae9}{\index{pacpus\-::\-Sick\-L\-M\-S\-Sensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}!is\-Message\-Complete@{is\-Message\-Complete}}
\index{is\-Message\-Complete@{is\-Message\-Complete}!pacpus::SickLMSSensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}}
\subsubsection[{is\-Message\-Complete}]{\setlength{\rightskip}{0pt plus 5cm}int pacpus\-::\-Sick\-L\-M\-S\-Sensor\-::is\-Message\-Complete (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{packets, }
\item[{unsigned int}]{size}
\end{DoxyParamCaption}
)}}\label{classpacpus_1_1SickLMSSensor_a0993b71ac52777e6588e57bb261c8ae9}


is\-Message\-Complete find the $<$\-E\-T\-X$>$ character (corresponding to the end of a message). 


\begin{DoxyParams}{Parameters}
{\em packets} & Raw data. \\
\hline
{\em size} & Size of raw data. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The index of the $<$\-E\-T\-X$>$ character. 
\end{DoxyReturn}
\hypertarget{classpacpus_1_1SickLMSSensor_a4ba9228b2f513fc3d7dcac5813065212}{\index{pacpus\-::\-Sick\-L\-M\-S\-Sensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}!process\-Scan\-Data@{process\-Scan\-Data}}
\index{process\-Scan\-Data@{process\-Scan\-Data}!pacpus::SickLMSSensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}}
\subsubsection[{process\-Scan\-Data}]{\setlength{\rightskip}{0pt plus 5cm}int pacpus\-::\-Sick\-L\-M\-S\-Sensor\-::process\-Scan\-Data (
\begin{DoxyParamCaption}
\item[{{\bf Message\-L\-M\-S} $\ast$}]{msg}
\end{DoxyParamCaption}
)}}\label{classpacpus_1_1SickLMSSensor_a4ba9228b2f513fc3d7dcac5813065212}


process\-Scan\-Data Parse information and process every needed values. 


\begin{DoxyParams}{Parameters}
{\em msg} & Carries a message. split\-Message field of \hyperlink{classpacpus_1_1MessageLMS}{Message\-L\-M\-S} must be filled. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Not used for the moment. 
\end{DoxyReturn}
\hypertarget{classpacpus_1_1SickLMSSensor_a3182c21683131e52c520d45bd4a23dae}{\index{pacpus\-::\-Sick\-L\-M\-S\-Sensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}!reconstitute\-Message@{reconstitute\-Message}}
\index{reconstitute\-Message@{reconstitute\-Message}!pacpus::SickLMSSensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}}
\subsubsection[{reconstitute\-Message}]{\setlength{\rightskip}{0pt plus 5cm}void pacpus\-::\-Sick\-L\-M\-S\-Sensor\-::reconstitute\-Message (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{packet, }
\item[{const int}]{length, }
\item[{road\-\_\-time\-\_\-t}]{time}
\end{DoxyParamCaption}
)}}\label{classpacpus_1_1SickLMSSensor_a3182c21683131e52c520d45bd4a23dae}


reconstitute\-Message reconstitute a complete message from received packets 


\begin{DoxyParams}{Parameters}
{\em packet} & Raw data coming from the sensor. \\
\hline
{\em length} & Length of the raw data received. \\
\hline
{\em time} & Time of the last received data.\\
\hline
\end{DoxyParams}
A message starts with a $<$\-S\-T\-X$>$ (0x02 in A\-S\-C\-I\-I) char and ends with $<$\-E\-T\-X$>$ (0x03 in A\-S\-C\-I\-I). This function stores packets until a complete message is received. In this case, the message is added to the list of \hyperlink{classpacpus_1_1MessageLMS}{Message\-L\-M\-S}, msg\-List. \hypertarget{classpacpus_1_1SickLMSSensor_a6268a9b5b17db84b662c562ea332541f}{\index{pacpus\-::\-Sick\-L\-M\-S\-Sensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}!start\-Activity@{start\-Activity}}
\index{start\-Activity@{start\-Activity}!pacpus::SickLMSSensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}}
\subsubsection[{start\-Activity}]{\setlength{\rightskip}{0pt plus 5cm}void pacpus\-::\-Sick\-L\-M\-S\-Sensor\-::start\-Activity (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classpacpus_1_1SickLMSSensor_a6268a9b5b17db84b662c562ea332541f}
To start the processing thread. T\-O\-D\-O get response from sensor and analyse it to know if measuring has started See p23 telegram 

Implements \hyperlink{classpacpus_1_1AbstractSickSensor_af8e017866cf70db766dbd11b60a52425}{pacpus\-::\-Abstract\-Sick\-Sensor}.

\hypertarget{classpacpus_1_1SickLMSSensor_a082417a753cef1d4f726c50b2e14a4d0}{\index{pacpus\-::\-Sick\-L\-M\-S\-Sensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}!stop\-Activity@{stop\-Activity}}
\index{stop\-Activity@{stop\-Activity}!pacpus::SickLMSSensor@{pacpus\-::\-Sick\-L\-M\-S\-Sensor}}
\subsubsection[{stop\-Activity}]{\setlength{\rightskip}{0pt plus 5cm}void pacpus\-::\-Sick\-L\-M\-S\-Sensor\-::stop\-Activity (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classpacpus_1_1SickLMSSensor_a082417a753cef1d4f726c50b2e14a4d0}
To stop the processing thread. 

Implements \hyperlink{classpacpus_1_1AbstractSickSensor_a14c6da8df61d91f2b63439df00fd5d6a}{pacpus\-::\-Abstract\-Sick\-Sensor}.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
Sick\-L\-M\-S\-Sensor.\-h\item 
Sick\-L\-M\-S\-Sensor.\-cpp\end{DoxyCompactItemize}
